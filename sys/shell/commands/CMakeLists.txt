add_riot_module(shell_commands STATIC shell_commands.c)

add_riot_module(shell_cmd_app_metadata OBJECT sc_app_metadata.c)
add_riot_module(shell_cmd_at30tse75x OBJECT sc_at30tse75x.c)
add_riot_module(shell_cmd_blacklist OBJECT sc_blacklist.c)
add_riot_module(shell_cmd_can OBJECT sc_can.c)
add_riot_module(shell_cmd_ccnl OBJECT sc_ccnl.c)
add_riot_module(shell_cmd_cord_ep OBJECT sc_cord_ep.c)
add_riot_module(shell_cmd_cryptoauthlib OBJECT sc_cryptoauthlib.c)
add_riot_module(shell_cmd_dfplayer OBJECT sc_dfplayer.c)
add_riot_module(shell_cmd_disk OBJECT sc_disk.c)
add_riot_module(shell_cmd_fib OBJECT sc_fib.c)
add_riot_module(shell_cmd_gnrc_6ctx OBJECT sc_gnrc_6ctx.c)
add_riot_module(shell_cmd_gnrc_6lo_frag_stats OBJECT sc_gnrc_6lo_frag_stats.c)
add_riot_module(shell_cmd_gnrc_icmpv6_echo OBJECT sc_gnrc_icmpv6_echo.c)
add_riot_module(shell_cmd_gnrc_ipv6_frag_stats OBJECT sc_gnrc_ipv6_frag_stats.c)
add_riot_module(shell_cmd_gnrc_ipv6_nib OBJECT sc_gnrc_ipv6_nib.c)
add_riot_module(shell_cmd_gnrc_netif OBJECT sc_gnrc_netif.c)
add_riot_module(shell_cmd_gnrc_pktbuf OBJECT sc_gnrc_pktbuf.c)
add_riot_module(shell_cmd_gnrc_rpl OBJECT sc_gnrc_rpl.c)
add_riot_module(shell_cmd_heap OBJECT sc_heap.c)
add_riot_module(shell_cmd_i2c_scan OBJECT sc_i2c_scan.c)
add_riot_module(shell_cmd_loramac OBJECT sc_loramac.c)
add_riot_module(shell_cmd_netstats_nb OBJECT sc_netstats_nb.c)
add_riot_module(shell_cmd_nimble_netif OBJECT sc_nimble_netif.c)
add_riot_module(shell_cmd_nimble_statconn OBJECT sc_nimble_statconn.c)
add_riot_module(shell_cmd_openwsn OBJECT sc_openwsn.c)
add_riot_module(shell_cmd_pm OBJECT sc_pm.c)
add_riot_module(shell_cmd_ps OBJECT sc_ps.c)
add_riot_module(shell_cmd_random OBJECT sc_random.c)
add_riot_module(shell_cmd_rtc OBJECT sc_rtc.c)
add_riot_module(shell_cmd_rtt OBJECT sc_rtt.c)
add_riot_module(shell_cmd_saul_reg OBJECT sc_saul_reg.c)
add_riot_module(shell_cmd_sht1x OBJECT sc_sht1x.c)
add_riot_module(shell_cmd_sntp OBJECT sc_sntp.c)
add_riot_module(shell_cmd_suit OBJECT sc_suit.c)
add_riot_module(shell_cmd_sys OBJECT sc_sys.c)
add_riot_module(shell_cmd_vfs OBJECT sc_vfs.c)
add_riot_module(shell_cmd_whitelist OBJECT sc_whitelist.c)

function(riot_is_module_used_genex genex usemodule)
  set(${genex} "$<BOOL:$<FILTER:$<TARGET_PROPERTY:RIOT,INTERFACE_RIOT_USEMODULE>,INCLUDE,^${usemodule}$>>" PARENT_SCOPE)
endfunction()

function(riot_enable_shell_command_if_usemodule shell_command usemodule)
  riot_is_module_used_genex(genex ${usemodule})
  target_link_libraries(riot_module_shell_commands PUBLIC $<${genex}:riot_module_${shell_command}>)
  target_link_libraries(riot_module_${shell_command} INTERFACE riot_module_${usemodule})
endfunction()

riot_enable_shell_command_if_usemodule(shell_cmd_app_metadata app_metadata)
#target_link_libraries(riot_module_app_metadata PUBLIC riot_module_shell_cmd_app_metadata)
#target_compile_options(riot_flags INTERFACE --riot-flags=$<$<BOOL:$<FILTER:$<TARGET_PROPERTY:RIOT,INTERFACE_RIOT_USEMODULE>,INCLUDE,^app_metadata$>>:shell_cmd_app_metadata>)
#target_link_libraries(riot_module_shell_commands PRIVATE $<$<FILTER:$<TARGET_PROPERTY:RIOT,INTERFACE_RIOT_USEMODULE>,INCLUDE,"^app_metadata$">:shell_cmd_app_metadata>)
