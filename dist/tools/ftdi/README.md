FTDI USB to serial adapter tools
================================

Tools for finding connected FTDI USB to serial adapter devices.

Usage
-----

    ./list-programmers.sh

List all currently connected FTDI FT2232H devices by searching through
`/sys/bus/usb/devices/`.

    ./find-tty.sh [serial]

Write to `stdout` the first tty connected to the chosen programmer. `serial` is
the USB device serial number, can be found from the list generated by
`list-programmers.sh`

Makefile example usage
----------------------

The script `find-tty.sh` is designed for use from within a board
`Makefile.include`. An example section is shown below (for an OpenOCD based
solution):

    # Add serial matching command
    ifneq ($(PROGRAMMER_SERIAL),)
      OOCD_BOARD_FLAGS += -c 'ftdi_serial $(PROGRAMMER_SERIAL)'

      ifeq ($(PORT),)
        # try to find tty name by serial number, only works on Linux currently.
        ifeq ($(OS),Linux)
          PORT :=$(shell $(RIOTBASE)/dist/tools/ftdi/find-tty.sh $(PROGRAMMER_SERIAL))
        endif
      endif
    endif

    # Fallback PORT if no serial was specified or if the specified serial was not found
    ifeq ($(PORT),)
        ifeq ($(OS),Linux)
          PORT := /dev/ttyUSB0
        else ifeq ($(OS),Darwin)
          PORT := $(shell ls -1 /dev/tty.SLAB_USBtoUART* | head -n 1)
        endif
    endif

    # TODO: add support for windows as host platform
    ifeq ($(PORT),)
      $(info CAUTION: No terminal port for your host system found!)
    endif
    export PORT


Limitations
-----------

Only tested on Linux, and probably only works on Linux.

The scripts are configured to only list devices with USB id 0403:6010
(FT2232H). To add more matches, change the numbers `'0403'` and `'6010'` in the
files `list-programmers.sh` and `find-tty.sh`, or open an issue at
https://github.com/RIOT-OS/RIOT/issues stating what USB devices you want to
add.
